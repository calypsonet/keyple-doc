# Keyple website maintenance guide 

The Keyple website is generated with [Hugo](https://gohugo.io/) open-source static site generator.

It uses the [Docsy](https://www.docsy.dev/) theme.

It is recommended that you work from the command line in a Linux or Windows console (Git Bash).

## Building and running the site locally
#### Install Hugo

Follow the instructions given here : https://www.docsy.dev/docs/getting-started/

Make sure you choose the extended version and install the additional modules ```PostCSS``` and ```autoprefixer```.

#### Clone the website source from the ```website-master``` branch to a local folder.
```
git clone -b website-master https://github.com/calypsonet/keyple-doc.git
git submodule update --init --recursive
```
*Note: a decent version of git is required (capable of handling sub-modules).*

#### Run Hugo server

Launch the local Hugo web server:
```
hugo server -v
```

#### Open the site in a browser

Web server is available at http://localhost:1313/keyple-website/ (bind address 127.0.0.1)

## Modifying the site and debugging the rendering

* The site parameters (URLs, home page layout, etc) are defined in the file ```config.toml```.
* The pages of the site are contained in ```.md``` in the ```content``` folder.

For details of the Hugo/Docsy layout possibilities refer to https://www.docsy.dev/docs/adding-content/.

## Publishing the site

The publication of the site consists of placing the code generated by Hugo in the ```website-published``` branch of the Github repository.

### Generate the static pages with Hugo

Just run ```hugo``` (withou argument) at the root of the folder.

### Update the remote branches

Push the source code in ```website-master``` and ```website-pubished``` branches.

All these operations are executable in a single operation with the ```deploy_keyple_website.sh``` script.

Changes will be visible online a few minutes after the branch update.